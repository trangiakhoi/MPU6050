#include<I2Cdev.h> #include<MPU6050.h> MPU6050 CBgoc; int16_t ax,ay,az; int16_t gx,gy,gz; Servo myservo; int giatrihientai; int giatritruoc; void setup() { Wire.begin(); Serial.begin(9600); Serial.println("Khoi dong MPU"); CBgoc.initialize(); Serial.println(CBgoc.testConnection()? "CBgoc da duoc ket noi" : "Khong ket noi duoc voi CBgoc"); myservo.attach(9); } void loop() { CBgoc.getMotion6(&ax,&ay,&az,&gx,&gy,&gz); //Serial.print("ax:"); //Serial.println(ax); Serial.print("ay:"); Serial.println(ay); //Serial.print("az:"); //Serial.println(az); //Serial.print("g:"); //Serial.print(gx); Serial.print("\t"); //Serial.print(gy); Serial.print("\t"); //Serial.print(gz); Serial.print("\t"); //Serial.println(); giatrihientai = map(ay, -17000, 17000, 0,179); if(giatrihientai!=giatritruoc) { myservo.write(giatrihientai); giatritruoc = giatrihientai; } delay(5400); }
